<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Albany Service - Premium Vehicle Care</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        :root {
            --primary: #722F37;
            --primary-dark: #5a252c;
            --secondary: #722F37;
            --accent: #EFFBBB;
            --dark: #2c1518;
            --light: #f8fff0;
            --gray: #64748b;
            --gradient-primary: linear-gradient(135deg, #722F37 0%, #8a3a44 100%);
            --gradient-secondary: linear-gradient(135deg, rgba(114, 47, 55, 0.1) 0%, rgba(239, 251, 187, 0.1) 100%);
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Baloo Bhaijaan 2', sans-serif;
            color: var(--dark);
            background-color: var(--light);
            overflow-x: hidden;
        }

        /* ========== NAVBAR STYLES ========== */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            padding: 1rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
        }

        .navbar.scrolled {
            padding: 0.5rem 0;
            background-color: rgba(255, 255, 255, 0.98);
        }

        .navbar-brand {
            font-family: 'Russo One', sans-serif;
            font-size: 1.75rem;
            color: var(--primary);
            letter-spacing: 1px;
        }

        .nav-link {
            font-weight: 500;
            color: var(--dark);
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
        }

        .btn-login, .btn-signup {
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-login {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-signup {
            background: var(--gradient-primary);
            border: none;
            color: white;
        }

        .btn-login:hover {
            background-color: rgba(114, 47, 55, 0.1);
            transform: translateY(-2px);
        }

        .btn-signup:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* User profile dropdown */
        .user-profile-dropdown {
            position: relative;
            display: inline-block;
        }

        .profile-toggle {
            background: none;
            border: none;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .profile-toggle:hover {
            background-color: rgba(114, 47, 55, 0.1);
        }

        .profile-toggle i {
            margin-left: 8px;
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }

        .profile-toggle.show i {
            transform: rotate(180deg);
        }

        .profile-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            z-index: 1000;
            min-width: 200px;
            padding: 0.5rem 0;
            margin: 0.5rem 0 0;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(0,0,0,0.1);
            display: none;
        }

        .profile-dropdown-menu.show {
            display: block;
            animation: fadeInDown 0.3s ease forwards;
        }

        .profile-dropdown-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .profile-dropdown-item:hover {
            background-color: rgba(114, 47, 55, 0.05);
            color: var(--primary);
        }

        .profile-dropdown-item i {
            margin-right: 10px;
            font-size: 1.1rem;
            color: var(--primary);
            width: 20px;
            text-align: center;
        }

        .profile-dropdown-divider {
            height: 1px;
            margin: 0.5rem 0;
            background-color: rgba(0,0,0,0.1);
        }

        .badge-premium {
            background-color: #FFD700;
            color: #000;
            font-size: 0.7rem;
            padding: 0.25em 0.5em;
            border-radius: 0.25rem;
            margin-left: 0.25rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* ========== HERO SECTION ========== */
        .hero-section {
            position: relative;
            height: 100vh;
            min-height: 600px;
            overflow: hidden;
            margin-top: 70px;
        }

        .carousel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .carousel-item {
            height: 100vh;
            min-height: 600px;
            background-color: #000;
        }

        .carousel-item img {
            object-fit: cover;
            height: 100%;
            opacity: 0.7;
            width: 100%;
        }

        .hero-content {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            z-index: 2;
        }

        .hero-title {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 1.5rem;
        }

        .hero-subtitle {
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 2rem;
            max-width: 500px;
        }

        .carousel-indicators {
            z-index: 3;
            bottom: 40px;
        }

        .carousel-indicators [data-bs-target] {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.7);
            margin: 0 6px;
            transition: all 0.3s ease;
        }

        .carousel-indicators .active {
            background-color: var(--primary);
            border-color: white;
            transform: scale(1.2);
        }

        .carousel-control-prev, .carousel-control-next {
            z-index: 3;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            margin: 0 30px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .carousel-control-prev-icon, .carousel-control-next-icon {
            width: 20px;
            height: 20px;
            opacity: 0.9;
        }

        .hero-section:hover .carousel-control-prev,
        .hero-section:hover .carousel-control-next {
            opacity: 1;
        }

        .carousel-control-prev:hover, .carousel-control-next:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .btn-hero, .btn-hero-secondary {
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .btn-hero {
            background: var(--gradient-primary);
            border: none;
            color: white;
        }

        .btn-hero:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* ========== MODAL STYLES ========== */
        .modal-backdrop {
            z-index: 1040;
        }

        .modal {
            z-index: 1050;
        }

        .modal-dialog {
            max-width: 700px;
            margin: 1.75rem auto;
        }

        .modal-content {
            border-radius: 15px;
            border: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .modal-header {
            background-color: #722F37;
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 1.25rem;
            align-items: center;
        }

        .modal-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            margin: 0;
        }

        .modal-title i {
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .btn-close {
            color: white;
            opacity: 0.8;
            box-shadow: none;
            padding: 1rem;
            margin: -1rem -1rem -1rem auto;
        }

        .btn-close:hover {
            opacity: 1;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            border-top: 1px solid #e9ecef;
            padding: 1rem 1.5rem;
            justify-content: space-between;
        }

        /* Booking Steps */
        .booking-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .booking-steps:after {
            content: '';
            position: absolute;
            top: 15px;
            left: 10%;
            width: 80%;
            height: 2px;
            background-color: #e9ecef;
            z-index: 1;
        }

        .booking-steps .step {
            position: relative;
            z-index: 2;
            text-align: center;
            width: 25%;
        }

        .step .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            font-weight: 600;
            border: 2px solid white;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background-color: #722F37;
            color: white;
            transform: scale(1.2);
        }

        .step.completed .step-number {
            background-color: #28a745;
            color: white;
        }

        .step .step-label {
            font-size: 0.85rem;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .step.active .step-label {
            color: #722F37;
            font-weight: 600;
        }

        .step.completed .step-label {
            color: #28a745;
        }

        /* Vehicle Cards */
        .vehicles-grid {
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .vehicle-card {
            display: flex;
            align-items: center;
            padding: 1.25rem;
            border-radius: 10px;
            background-color: white;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
            margin-bottom: 15px;
            animation: fadeInUp 0.5s ease forwards;
        }

        .vehicle-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: #ced4da;
        }

        .vehicle-card.selected {
            border-color: #722F37;
            background-color: rgba(114, 47, 55, 0.05);
        }

        .vehicle-icon {
            width: 50px;
            height: 50px;
            background: #722F37;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 1.25rem;
            flex-shrink: 0;
        }

        .vehicle-info {
            flex: 1;
        }

        .vehicle-info h5 {
            margin-bottom: 5px;
            font-weight: 600;
            color: #343a40;
        }

        .vehicle-info p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .vehicle-select {
            color: #ccc;
            font-size: 1.5rem;
            margin-left: 10px;
        }

        .vehicle-card.selected .vehicle-select {
            color: #722F37;
        }

        /* Service Options */
        .service-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            grid-gap: 1.25rem;
            margin-top: 1.5rem;
        }

        .service-option {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .service-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: #ced4da;
        }

        .service-option.selected {
            border-color: #722F37;
            background-color: rgba(114, 47, 55, 0.05);
        }

        .service-option .service-icon {
            width: 50px;
            height: 50px;
            background: #722F37;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-right: 1.25rem;
            flex-shrink: 0;
        }

        .service-option .service-info {
            flex: 1;
        }

        .service-option .service-info h5 {
            margin-bottom: 5px;
            font-weight: 600;
            color: #343a40;
        }

        .service-option .service-info p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* New Vehicle Form */
        #newVehicleForm {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1rem;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }

        #newVehicleForm h5 {
            font-weight: 600;
            margin-bottom: 1.25rem;
            color: #343a40;
            display: flex;
            align-items: center;
        }

        #newVehicleForm h5 i {
            margin-right: 10px;
            color: #722F37;
        }

        #newVehicleForm .form-label {
            font-weight: 500;
            color: #495057;
        }

        #newVehicleForm .form-control,
        #newVehicleForm .form-select {
            border-radius: 8px;
            padding: 0.6rem 1rem;
        }

        #newVehicleForm .form-control:focus,
        #newVehicleForm .form-select:focus {
            box-shadow: 0 0 0 0.25rem rgba(114, 47, 55, 0.25);
            border-color: #722F37;
        }

        /* Confirmation Summary */
        .confirmation-summary {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid #e9ecef;
        }

        .summary-row {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 1rem;
        }

        .summary-row:last-child {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }

        .summary-label {
            font-weight: 600;
            width: 180px;
            flex-shrink: 0;
            color: #495057;
        }

        .summary-value {
            flex: 1;
            color: #212529;
        }

        /* Terms Agreement */
        .terms-agreement {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            border: 1px solid #e9ecef;
        }

        .terms-agreement .form-check-label {
            font-size: 0.9rem;
            color: #495057;
        }

        .terms-agreement a {
            color: #722F37;
            text-decoration: none;
        }

        .terms-agreement a:hover {
            text-decoration: underline;
        }

        /* Success Modal */
        #bookingSuccessModal .modal-body {
            text-align: center;
            padding: 2.5rem;
        }

        .success-icon-container {
            margin-bottom: 1.5rem;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: #722F37;
            border-radius: 50%;
            color: white;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .success-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #722F37;
        }

        .success-message {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #6c757d;
        }

        .booking-reference {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1.1rem;
            border: 1px solid #e9ecef;
        }

        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }

        .toast {
            min-width: 250px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Other sections styling */
        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto;
        }

        .features-section {
            padding: 6rem 0;
            background-color: white;
        }

        .feature-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            height: 100%;
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: var(--gradient-primary);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 2rem;
            transition: all 0.3s ease;
        }

        .feature-title {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .feature-text {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .btn-feature {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-feature:hover {
            background-color: var(--primary);
            color: white;
        }

        .services-section {
            padding: 6rem 0;
            background: linear-gradient(135deg, rgba(114, 47, 55, 0.05) 0%, rgba(239, 251, 187, 0.1) 100%);
        }

        .service-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            height: 100%;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .service-img {
            height: 200px;
            width: 100%;
            object-fit: cover;
        }

        .service-content {
            padding: 2rem;
            position: relative;
        }

        .service-title {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .service-text {
            color: var(--gray);
            margin-bottom: 1.5rem;
        }

        .service-content .service-icon {
            position: absolute;
            right: 20px;
            top: -25px;
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: var(--shadow-lg);
        }

        .how-it-works {
            padding: 6rem 0;
            background-color: white;
        }

        .step-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            height: 100%;
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            text-align: center;
        }

        .step-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin: 0 auto 1.5rem;
        }

        .step-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .step-title {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .step-text {
            color: var(--gray);
        }

        .testimonials-section {
            padding: 6rem 0;
            background: linear-gradient(135deg, rgba(114, 47, 55, 0.05) 0%, rgba(239, 251, 187, 0.1) 100%);
        }

        .testimonial-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            height: 100%;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .testimonial-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .testimonial-text {
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 2rem;
            position: relative;
            padding-left: 2rem;
        }

        .testimonial-text:before {
            content: '"';
            position: absolute;
            left: 0;
            top: -10px;
            font-size: 3rem;
            color: var(--primary);
            opacity: 0.3;
            font-family: serif;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
        }

        .testimonial-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 1rem;
            border: 3px solid var(--primary);
        }

        .testimonial-name {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 0.25rem;
            color: var(--dark);
        }

        .testimonial-role {
            color: var(--gray);
            margin-bottom: 0.5rem;
        }

        .testimonial-rating {
            color: #FFD700;
        }

        .cta-section {
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
            background: var(--gradient-primary);
            color: white;
        }

        .cta-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
        }

        .cta-text {
            font-size: 1.1rem;
            max-width: 600px;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .btn-cta {
            background: white;
            color: var(--primary);
            border: none;
            border-radius: 50px;
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
        }

        .btn-cta:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .contact-section {
            padding: 6rem 0;
            background-color: white;
        }

        .contact-info-card {
            background: var(--gradient-primary);
            color: white;
            border-radius: 20px;
            padding: 2.5rem;
            height: 100%;
            box-shadow: var(--shadow-lg);
        }

        .contact-info-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .contact-info-subtitle {
            opacity: 0.8;
            margin-bottom: 2rem;
        }

        .contact-info-items {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .contact-info-item {
            display: flex;
            align-items: flex-start;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .contact-details h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .contact-details p {
            opacity: 0.8;
            margin-bottom: 0;
        }

        .contact-form-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            height: 100%;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .contact-form .form-control,
        .contact-form .form-select {
            border-radius: 10px;
            padding: 0.75rem 1rem;
            border: 1px solid #e9ecef;
        }

        .contact-form .form-control:focus,
        .contact-form .form-select:focus {
            box-shadow: 0 0 0 0.25rem rgba(114, 47, 55, 0.25);
            border-color: var(--primary);
        }

        .contact-form textarea {
            min-height: 120px;
        }

        .footer {
            background-color: var(--dark);
            color: white;
            padding: 5rem 0 2rem;
        }

        .footer-logo {
            font-family: 'Russo One', sans-serif;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .footer-text {
            opacity: 0.7;
            margin-bottom: 1.5rem;
            max-width: 300px;
        }

        .footer-social {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--primary);
        }

        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }

        .footer-contact {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .footer-contact i {
            width: 30px;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .footer-contact span {
            opacity: 0.7;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            margin-top: 2rem;
            text-align: center;
            opacity: 0.6;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive styles */
        @media (max-width: 991.98px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .btn-hero, .btn-hero-secondary {
                padding: 0.75rem 1.5rem;
            }

            .modal-dialog {
                max-width: 90%;
            }

            .service-options {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 767.98px) {
            .hero-section {
                height: auto;
                padding: 6rem 0;
            }

            .hero-title {
                font-size: 2rem;
            }

            .modal-dialog {
                margin: 0.5rem;
                max-width: calc(100% - 1rem);
            }

            .service-options {
                grid-template-columns: 1fr;
            }

            .booking-steps .step-label {
                font-size: 0.7rem;
            }
        }

        @media (max-width: 575.98px) {
            .modal-body {
                padding: 1rem;
            }

            .modal-footer {
                padding: 0.75rem 1rem;
                flex-direction: column;
            }

            .modal-footer button {
                width: 100%;
                margin: 0.25rem 0;
            }

            .booking-steps:after {
                left: 15%;
                width: 70%;
            }
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/">ALBANY</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/customer/aboutUs">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#services">Services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/customer/membership">Membership</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact">Contact Us</a>
                </li>
            </ul>
            <div class="ms-lg-3 mt-3 mt-lg-0 d-flex" id="auth-container">
                <a href="/authentication/login" class="btn btn-login me-2">Login</a>
                <a href="/authentication/login" class="btn btn-signup">Signup</a>
            </div>
        </div>
    </div>
</nav>

<section class="hero-section">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="/assets/vehicleBanner1.jpg" class="d-block w-100" alt="Premium Service">
            </div>
            <div class="carousel-item">
                <img src="/assets/vehicleBanner1.jpg" class="d-block w-100" alt="Expert Technicians">
            </div>
            <div class="carousel-item">
                <img src="/assets/vehicleBanner1.jpg" class="d-block w-100" alt="Quality Service">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <div class="hero-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h1 class="hero-title" data-aos="fade-up">Premium Vehicle Service Management</h1>
                    <p class="hero-subtitle" data-aos="fade-up" data-aos-delay="100">Experience exceptional care for your vehicle with our expert technicians and state-of-the-art facilities.</p>
                    <div data-aos="fade-up" data-aos-delay="200">
                        <button class="btn btn-hero" id="bookServiceBtn">Book Service</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="features-section" id="features">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" data-aos="fade-up">Why Choose Albany</h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">We provide premium vehicle service with a focus on quality, transparency, and customer satisfaction.</p>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h3 class="feature-title">Expert Technicians</h3>
                    <p class="feature-text">Our certified technicians have years of experience and specialized training to handle all types of vehicles.</p>
                    <button class="btn btn-feature">Learn More <i class="bi bi-arrow-right"></i></button>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-clock-history"></i>
                    </div>
                    <h3 class="feature-title">Real-time Tracking</h3>
                    <p class="feature-text">Track your vehicle's service status in real-time through our customer portal and get instant updates.</p>
                    <button class="btn btn-feature">Learn More <i class="bi bi-arrow-right"></i></button>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="bi bi-tools"></i>
                    </div>
                    <h3 class="feature-title">Genuine Parts</h3>
                    <p class="feature-text">We use only genuine parts and premium materials to ensure the longevity and performance of your vehicle.</p>
                    <button class="btn btn-feature">Learn More <i class="bi bi-arrow-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="services-section" id="services">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" data-aos="fade-up">Our Special Services</h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Albany Car Service delivers top-tier automotive care, blending local expertise with exceptional quality for every ride</p>
        </div>

        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up">
                <div class="service-card">
                    <img src="/assets/EngineDiagnosis.jpg" class="service-img" alt="Engine Diagnostics">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-tools"></i>
                        </div>
                        <h3 class="service-title">Engine Diagnostics</h3>
                        <p class="service-text">Advanced diagnostic tools to identify and resolve engine issues quickly and accurately.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="service-card">
                    <img src="/assets/oilAndFilter.jpg" class="service-img" alt="Oil and Filters">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-droplet-fill"></i>
                        </div>
                        <h3 class="service-title">Oil and Filters</h3>
                        <p class="service-text">High-quality oil changes and filter replacements to keep your engine running smoothly.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="service-card">
                    <img src="/assets/BrakeRepair.jpg" class="service-img" alt="Brake Repair">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-car-front-fill"></i>
                        </div>
                        <h3 class="service-title">Brake Repair</h3>
                        <p class="service-text">Expert brake inspections and repairs for safe and reliable stopping power.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="service-card">
                    <img src="/assets/wheelAlignment.jpg" class="service-img" alt="Wheel Alignment">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-gear-wide-connected"></i>
                        </div>
                        <h3 class="service-title">Wheel Alignment</h3>
                        <p class="service-text">Precision alignment for optimal handling and tire wear.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                <div class="service-card">
                    <img src="/assets/battery.jpg" class="service-img" alt="Battery Checking">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-battery-charging"></i>
                        </div>
                        <h3 class="service-title">Battery Checking</h3>
                        <p class="service-text">Comprehensive battery testing and maintenance.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="500">
                <div class="service-card">
                    <img src="/assets/generalService.jpg" class="service-img" alt="General Service">
                    <div class="service-content">
                        <div class="service-icon">
                            <i class="bi bi-wrench-adjustable"></i>
                        </div>
                        <h3 class="service-title">General Service</h3>
                        <p class="service-text">Complete vehicle maintenance and inspection.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="how-it-works" id="how-it-works">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" data-aos="fade-up">How It Works</h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Book your vehicle service in just a few simple steps.</p>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-icon">
                        <i class="bi bi-calendar-plus"></i>
                    </div>
                    <h3 class="step-title">Book Appointment</h3>
                    <p class="step-text">Schedule your service appointment online or through our mobile app.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-icon">
                        <i class="bi bi-car-front"></i>
                    </div>
                    <h3 class="step-title">Vehicle Diagnosis</h3>
                    <p class="step-text">Our experts diagnose your vehicle and provide a detailed service plan.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-icon">
                        <i class="bi bi-tools"></i>
                    </div>
                    <h3 class="step-title">Service Execution</h3>
                    <p class="step-text">We perform the service with precision using genuine parts and materials.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="step-card">
                    <div class="step-number">4</div>
                    <div class="step-icon">
                        <i class="bi bi-check-circle"></i>
                    </div>
                    <h3 class="step-title">Delivery & Payment</h3>
                    <p class="step-text">Receive your serviced vehicle and complete the payment process.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="testimonials-section" id="testimonials">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" data-aos="fade-up">What Our Customers Say</h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Don't just take our word for it. Here's what our satisfied customers have to say.</p>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up">
                <div class="testimonial-card">
                    <p class="testimonial-text">Albany Service has been taking care of my car for years. Their attention to detail and quality of service is unmatched. I wouldn't trust my vehicle with anyone else.</p>
                    <div class="testimonial-author">
                        <img src="/assets/customer4.jpg" alt="Rajesh Kumar" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Rajesh Kumar</h4>
                            <p class="testimonial-role">Business Owner</p>
                            <div class="testimonial-rating">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="testimonial-card">
                    <p class="testimonial-text">The real-time tracking feature is amazing! I could see exactly what was happening with my car during the service. The transparency and communication are excellent.</p>
                    <div class="testimonial-author">
                        <img src="/assets/customer3.jpg" alt="Priya Sharma" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Priya Sharma</h4>
                            <p class="testimonial-role">Software Engineer</p>
                            <div class="testimonial-rating">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="testimonial-card">
                    <p class="testimonial-text">I've been a premium member for over a year now, and the benefits are worth every penny. Priority service, discounts, and the dedicated customer support make it a great value.</p>
                    <div class="testimonial-author">
                        <img src="/assets/customer6.jpg" alt="Vikram Singh" class="testimonial-avatar">
                        <div>
                            <h4 class="testimonial-name">Vikram Singh</h4>
                            <p class="testimonial-role">Marketing Director</p>
                            <div class="testimonial-rating">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="cta-section">
    <div class="cta-bg"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="cta-title" data-aos="fade-up">Ready to Experience Premium Vehicle Service?</h2>
                <p class="cta-text mx-auto" data-aos="fade-up" data-aos-delay="100">Join thousands of satisfied customers who trust Albany for their vehicle service needs. Book your appointment today and experience the difference.</p>
                <button class="btn btn-cta" data-aos="fade-up" data-aos-delay="200" id="ctaBookServiceBtn">Book Your Service Now</button>
            </div>
        </div>
    </div>
</section>

<section class="contact-section" id="contact">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" data-aos="fade-up">Get In Touch</h2>
            <p class="section-subtitle" data-aos="fade-up" data-aos-delay="100">Have questions about our services? We're here to help and answer any questions you might have.</p>
        </div>
        <div class="row g-4">
            <div class="col-lg-5" data-aos="fade-right">
                <div class="contact-info-card">
                    <h3 class="contact-info-title">Contact Information</h3>
                    <p class="contact-info-subtitle">Reach out to us through any of these channels</p>
                    <div class="contact-info-items">
                        <div class="contact-info-item">
                            <div class="contact-icon">
                                <i class="bi bi-geo-alt"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Our Location</h4>
                                <p>123 Albany Street, Chennai, India</p>
                            </div>
                        </div>
                        <div class="contact-info-item">
                            <div class="contact-icon">
                                <i class="bi bi-telephone"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Phone Number</h4>
                                <p>+91 98765 43210</p>
                            </div>
                        </div>
                        <div class="contact-info-item">
                            <div class="contact-icon">
                                <i class="bi bi-envelope"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Email Address</h4>
                                <p>support@albanyservice.com</p>
                            </div>
                        </div>
                        <div class="contact-info-item">
                            <div class="contact-icon">
                                <i class="bi bi-clock"></i>
                            </div>
                            <div class="contact-details">
                                <h4>Working Hours</h4>
                                <p>Mon-Sat: 8:00 AM - 8:00 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-7" data-aos="fade-left">
                <div class="contact-form-card">
                    <form class="contact-form" action="/contact/submit" method="post">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" name="name" placeholder="Your Name" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="email" class="form-control" name="email" placeholder="Your Email" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="tel" class="form-control" name="phone" placeholder="Phone Number" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <select class="form-select" name="subject">
                                        <option selected disabled>Select Subject</option>
                                        <option>Service Inquiry</option>
                                        <option>Booking Question</option>
                                        <option>Technical Support</option>
                                        <option>Feedback</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">
                                    <textarea class="form-control" name="message" rows="5" placeholder="Your Message" required></textarea>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary w-100">Send Message</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer" id="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-5 mb-lg-0">
                <div class="footer-logo">ALBANY</div>
                <p class="footer-text">Premium vehicle service management system providing exceptional care for your vehicles.</p>
                <div class="footer-social">
                    <a href="#" class="social-link"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="social-link"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="social-link"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="social-link"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 mb-5 mb-md-0">
                <h3 class="footer-title">Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#testimonials">Testimonials</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-4 mb-5 mb-md-0">
                <h3 class="footer-title">Services</h3>
                <ul class="footer-links">
                    <li><a href="#">Regular Maintenance</a></li>
                    <li><a href="#">Engine Diagnostics</a></li>
                    <li><a href="#">Brake Service</a></li>
                    <li><a href="#">Oil Change</a></li>
                    <li><a href="#">Battery Service</a></li>
                </ul>
            </div>
            <div class="col-lg-4 col-md-4">
                <h3 class="footer-title">Contact Us</h3>
                <div class="footer-contact">
                    <i class="bi bi-geo-alt"></i>
                    <span>123 Albany Street, Chennai, India</span>
                </div>
                <div class="footer-contact">
                    <i class="bi bi-envelope"></i>
                    <span>support@albanyservice.com</span>
                </div>
                <div class="footer-contact">
                    <i class="bi bi-telephone"></i>
                    <span>+91 98765 43210</span>
                </div>
                <div class="footer-contact">
                    <i class="bi bi-clock"></i>
                    <span>Mon-Sat: 8:00 AM - 8:00 PM</span>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Albany. All Rights Reserved.</p>
        </div>
    </div>
</footer>

<!-- Book Service Modal -->
<div class="modal fade" id="bookServiceModal" tabindex="-1" aria-labelledby="bookServiceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bookServiceModalLabel">
                    <i class="bi bi-calendar-check me-2"></i>Book a Service
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="booking-steps mb-4">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Vehicle</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">Service</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">Details</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">Confirm</div>
                    </div>
                </div>

                <form id="bookServiceForm">
                    <!-- Step 1: Vehicle Selection -->
                    <div class="booking-step-content active" id="step-1">
                        <h4 class="step-title">Select Your Vehicle</h4>

                        <div id="vehiclesList" class="vehicles-grid mb-4">
                            <div class="loading-vehicles text-center py-4">
                                <div class="spinner-border text-primary mb-2" role="status"></div>
                                <p>Loading your vehicles...</p>
                            </div>
                        </div>

                        <div class="add-vehicle-section">
                            <button type="button" class="btn btn-outline-secondary w-100" id="showAddVehicleBtn">
                                <i class="bi bi-plus-circle me-2"></i>Add a New Vehicle
                            </button>
                        </div>

                        <div id="newVehicleForm" class="mt-4" style="display: none;">
                            <h5 class="mb-3">
                                <i class="bi bi-car-front me-2"></i>New Vehicle Details
                            </h5>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="vehicleBrand" class="form-label">Brand <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="vehicleBrand" name="vehicleBrand" placeholder="e.g. Toyota" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="vehicleModel" class="form-label">Model <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="vehicleModel" name="vehicleModel" placeholder="e.g. Corolla" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="vehicleRegNumber" class="form-label">Registration Number <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="vehicleRegNumber" name="vehicleRegNumber" placeholder="e.g. KA01AB1234" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="vehicleYear" class="form-label">Year <span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="vehicleYear" name="vehicleYear" placeholder="e.g. 2022" min="1990" max="2025" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="vehicleCategory" class="form-label">Category <span class="text-danger">*</span></label>
                                    <select class="form-select" id="vehicleCategory" name="vehicleCategory" required>
                                        <option value="">Select Category</option>
                                        <option value="Car">Car</option>
                                        <option value="Bike">Bike</option>
                                        <option value="Truck">Truck</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-3 text-end">
                                <button type="button" class="btn btn-outline-secondary me-2" id="cancelNewVehicleBtn">Cancel</button>
                                <button type="button" class="btn btn-primary" id="saveNewVehicleBtn">Save Vehicle</button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Service Selection -->
                    <div class="booking-step-content" id="step-2" style="display: none;">
                        <h4 class="step-title">Select Service Type</h4>

                        <div class="service-options">
                            <div class="service-option" data-service="General Service">
                                <div class="service-icon">
                                    <i class="bi bi-tools"></i>
                                </div>
                                <div class="service-info">
                                    <h5>General Service</h5>
                                    <p>Complete check-up and maintenance for your vehicle</p>
                                </div>
                            </div>

                            <div class="service-option" data-service="Oil Change">
                                <div class="service-icon">
                                    <i class="bi bi-droplet-fill"></i>
                                </div>
                                <div class="service-info">
                                    <h5>Oil Change</h5>
                                    <p>Oil change and filter replacement service</p>
                                </div>
                            </div>

                            <div class="service-option" data-service="Brake Service">
                                <div class="service-icon">
                                    <i class="bi bi-disc"></i>
                                </div>
                                <div class="service-info">
                                    <h5>Brake Service</h5>
                                    <p>Brake inspection, pad replacement and repair</p>
                                </div>
                            </div>

                            <div class="service-option" data-service="Engine Diagnostics">
                                <div class="service-icon">
                                    <i class="bi bi-cpu"></i>
                                </div>
                                <div class="service-info">
                                    <h5>Engine Diagnostics</h5>
                                    <p>Complete engine diagnostics and troubleshooting</p>
                                </div>
                            </div>

                            <div class="service-option" data-service="Wheel Alignment">
                                <div class="service-icon">
                                    <i class="bi bi-hexagon"></i>
                                </div>
                                <div class="service-info">
                                    <h5>Wheel Alignment</h5>
                                    <p>Precision wheel alignment for optimal handling</p>
                                </div>
                            </div>

                            <div class="service-option" data-service="Battery Service">
                                <div class="service-icon">
                                    <i class="bi bi-battery-charging"></i>
                                </div>
                                <div class="service-info">
                                    <h5>Battery Service</h5>
                                    <p>Battery check, charging and replacement</p>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" id="selectedService" name="serviceType">
                    </div>

                    <!-- Step 3: Service Details -->
                    <div class="booking-step-content" id="step-3" style="display: none;">
                        <h4 class="step-title">Service Details</h4>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="deliveryDate" class="form-label">Preferred Service Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="deliveryDate" name="deliveryDate" required>
                            </div>

                            <div class="col-md-6">
                                <label for="preferredTime" class="form-label">Preferred Time</label>
                                <select class="form-select" id="preferredTime" name="preferredTime">
                                    <option value="">Select Time</option>
                                    <option value="Morning (9-12)">Morning (9:00 AM - 12:00 PM)</option>
                                    <option value="Afternoon (12-3)">Afternoon (12:00 PM - 3:00 PM)</option>
                                    <option value="Evening (3-6)">Evening (3:00 PM - 6:00 PM)</option>
                                </select>
                            </div>

                            <div class="col-12">
                                <label for="serviceDescription" class="form-label">Additional Information</label>
                                <textarea class="form-control" id="serviceDescription" name="additionalDescription" rows="4" placeholder="Please describe any specific issues or service requirements"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Confirmation -->
                    <div class="booking-step-content" id="step-4" style="display: none;">
                        <h4 class="step-title">Confirm Your Booking</h4>

                        <div class="confirmation-summary">
                            <div class="summary-row">
                                <div class="summary-label">Vehicle:</div>
                                <div class="summary-value" id="summaryVehicle"></div>
                            </div>

                            <div class="summary-row">
                                <div class="summary-label">Service Type:</div>
                                <div class="summary-value" id="summaryService"></div>
                            </div>

                            <div class="summary-row">
                                <div class="summary-label">Service Date:</div>
                                <div class="summary-value" id="summaryDate"></div>
                            </div>

                            <div class="summary-row">
                                <div class="summary-label">Preferred Time:</div>
                                <div class="summary-value" id="summaryTime"></div>
                            </div>

                            <div class="summary-row">
                                <div class="summary-label">Additional Information:</div>
                                <div class="summary-value" id="summaryDescription"></div>
                            </div>
                        </div>

                        <div class="terms-agreement mt-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="termsCheck" required>
                                <label class="form-check-label" for="termsCheck">
                                    I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">terms and conditions</a> for vehicle service
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" id="prevStepBtn" style="display: none;">
                    <i class="bi bi-arrow-left me-1"></i> Previous
                </button>
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="nextStepBtn">
                    Next <i class="bi bi-arrow-right ms-1"></i>
                </button>
                <button type="button" class="btn btn-primary" id="submitBookingBtn" style="display: none;">
                    <i class="bi bi-check-circle me-1"></i> Confirm Booking
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Booking Success Modal -->
<div class="modal fade" id="bookingSuccessModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center p-5">
                <div class="success-icon-container mb-4">
                    <div class="success-icon">
                        <i class="bi bi-check-lg"></i>
                    </div>
                </div>
                <h3 class="success-title mb-3">Booking Successful!</h3>
                <p class="success-message mb-4">Your service has been booked successfully. You will receive a confirmation email shortly.</p>
                <p class="booking-reference mb-4">Booking Reference: <strong id="bookingReference">ALB-2506-2025</strong></p>
                <button type="button" class="btn btn-primary btn-lg" data-bs-dismiss="modal">
                    <i class="bi bi-check-circle me-2"></i>Continue
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Terms and Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Terms and Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6>Service Booking Terms</h6>
                <p>By booking a service with Albany, you agree to the following terms and conditions:</p>
                <ul>
                    <li>All service bookings are subject to availability and confirmation</li>
                    <li>The final cost will be determined after vehicle inspection</li>
                    <li>Cancellations must be made at least 24 hours before the scheduled service</li>
                    <li>Albany reserves the right to use genuine or equivalent quality parts</li>
                    <li>The service timeline may vary based on the actual condition of the vehicle</li>
                </ul>

                <h6>Payment Terms</h6>
                <p>Payment terms for our services include:</p>
                <ul>
                    <li>A diagnostic fee may be applicable before the full service</li>
                    <li>Final payment is due upon completion of the service</li>
                    <li>We accept credit/debit cards, UPI payments, and net banking</li>
                    <li>Premium members may be eligible for special payment options</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
            </div>
        </div>
    </div>
</div>

<!-- Toast container for notifications -->
<div class="toast-container position-fixed top-0 end-0 p-3"></div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    class BookingSystem {
        constructor() {
            this.state = {
                currentStep: 1,
                totalSteps: 4,
                selectedVehicleId: null,
                vehicles: [],
                newVehicle: null,
                selectedService: null,
                formData: {}
            };

            this.elements = {};
            this.apiEndpoints = {
                vehicles: '/customer/api/vehicles',
                newVehicle: '/customer/api/vehicles/add',
                bookService: '/customer/api/service-requests'
            };

            this.init();
        }

        init() {
            this.cacheElements();
            this.setupEventListeners();
            this.setupBookingSteps();
            this.initializeDateInputs();
            this.initUI();
            this.checkAuthentication();
        }

        initUI() {
            if (typeof AOS !== 'undefined') {
                AOS.init({
                    duration: 800,
                    easing: 'ease-in-out',
                    once: true
                });
            }

            this.setupNavigation();
            this.setupBookServiceButtons();
        }

        checkAuthentication() {
            const authToken = sessionStorage.getItem('authToken');
            const userInfoStr = sessionStorage.getItem('userInfo');

            if (authToken && userInfoStr) {
                try {
                    const userInfo = JSON.parse(userInfoStr);
                    this.updateAuthUI(userInfo);
                } catch (e) {
                    console.error('Error parsing user info:', e);
                }
            }
        }

        updateAuthUI(userData) {
            const authContainer = document.getElementById('auth-container');
            if (!authContainer) return;

            const isPremium = userData.membershipType === 'PREMIUM';

            authContainer.innerHTML = `
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-person-circle me-1"></i>
                    <span>${this.escapeHtml(userData.firstName || 'User')}</span>
                    ${isPremium ? '<span class="badge badge-premium">PREMIUM</span>' : ''}
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                    <li><a class="dropdown-item" href="/customer/profile">My Profile</a></li>
                    <li><a class="dropdown-item" href="/customer/myVehicles">My Vehicles</a></li>
                    <li><a class="dropdown-item" href="/customer/serviceHistory">Service History</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                </ul>
            </div>
        `;

            document.getElementById('logoutBtn').addEventListener('click', (e) => {
                e.preventDefault();
                this.logout();
            });
        }

        logout() {
            sessionStorage.removeItem('authToken');
            sessionStorage.removeItem('userInfo');
            window.location.href = '/';
        }

        setupNavigation() {
            window.addEventListener('scroll', () => {
                const navbar = document.querySelector('.navbar');
                if (navbar) {
                    navbar.classList.toggle('scrolled', window.scrollY > 50);
                }
            });

            this.setActiveNavItem();
        }

        setActiveNavItem() {
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

            navLinks.forEach(link => {
                link.classList.remove('active');

                const href = link.getAttribute('href');
                if (href && ((href === '/' && (currentPath === '/' || currentPath === '')) ||
                    (href !== '/' && currentPath.startsWith(href)))) {
                    link.classList.add('active');
                }
            });
        }

        setupBookServiceButtons() {
            const bookButtons = document.querySelectorAll('#bookServiceBtn, #ctaBookServiceBtn');
            bookButtons.forEach(btn => {
                btn.addEventListener('click', () => this.showBookingModal());
            });
        }

        showBookingModal() {
            const authToken = sessionStorage.getItem('authToken');

            if (authToken) {
                const bookServiceModal = new bootstrap.Modal(document.getElementById('bookServiceModal'));
                bookServiceModal.show();
            } else {
                window.location.href = '/authentication/login?message=' +
                    encodeURIComponent('Please login to book a service') +
                    '&type=info&redirect=/';
            }
        }

        cacheElements() {
            this.elements = {
                modal: document.getElementById('bookServiceModal'),
                form: document.getElementById('bookServiceForm'),
                steps: document.querySelectorAll('.booking-steps .step'),
                stepContents: document.querySelectorAll('.booking-step-content'),
                nextBtn: document.getElementById('nextStepBtn'),
                prevBtn: document.getElementById('prevStepBtn'),
                submitBtn: document.getElementById('submitBookingBtn'),
                vehiclesList: document.getElementById('vehiclesList'),
                showAddVehicleBtn: document.getElementById('showAddVehicleBtn'),
                newVehicleForm: document.getElementById('newVehicleForm'),
                saveVehicleBtn: document.getElementById('saveNewVehicleBtn'),
                cancelVehicleBtn: document.getElementById('cancelNewVehicleBtn'),
                serviceOptions: document.querySelectorAll('.service-option'),
                selectedServiceInput: document.getElementById('selectedService'),
                deliveryDate: document.getElementById('deliveryDate'),
                preferredTime: document.getElementById('preferredTime'),
                serviceDescription: document.getElementById('serviceDescription'),
                summaryVehicle: document.getElementById('summaryVehicle'),
                summaryService: document.getElementById('summaryService'),
                summaryDate: document.getElementById('summaryDate'),
                summaryTime: document.getElementById('summaryTime'),
                summaryDescription: document.getElementById('summaryDescription'),
                termsCheck: document.getElementById('termsCheck')
            };
        }

        setupEventListeners() {
            if (this.elements.modal) {
                this.elements.modal.addEventListener('show.bs.modal', () => this.onModalShow());
            }

            if (this.elements.nextBtn) {
                this.elements.nextBtn.addEventListener('click', () => this.goToNextStep());
            }

            if (this.elements.prevBtn) {
                this.elements.prevBtn.addEventListener('click', () => this.goToPreviousStep());
            }

            if (this.elements.submitBtn) {
                this.elements.submitBtn.addEventListener('click', () => this.submitBooking());
            }

            if (this.elements.showAddVehicleBtn) {
                this.elements.showAddVehicleBtn.addEventListener('click', () => this.showAddVehicleForm());
            }

            if (this.elements.saveVehicleBtn) {
                this.elements.saveVehicleBtn.addEventListener('click', () => this.saveNewVehicle());
            }

            if (this.elements.cancelVehicleBtn) {
                this.elements.cancelVehicleBtn.addEventListener('click', () => this.hideAddVehicleForm());
            }

            if (this.elements.serviceOptions) {
                this.elements.serviceOptions.forEach(option => {
                    option.addEventListener('click', () => this.selectService(option));
                });
            }
        }

        setupBookingSteps() {
            const today = new Date();
            if (this.elements.deliveryDate) {
                this.elements.deliveryDate.min = today.toISOString().split('T')[0];
            }
        }

        initializeDateInputs() {
            if (this.elements.deliveryDate) {
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(today.getDate() + 1);
                this.elements.deliveryDate.value = tomorrow.toISOString().split('T')[0];
            }
        }

        onModalShow() {
            this.resetForm();
            this.loadUserVehicles();
        }

        resetForm() {
            this.state.currentStep = 1;
            this.state.selectedVehicleId = null;
            this.state.selectedService = null;
            this.state.formData = {};

            if (this.elements.form) {
                this.elements.form.reset();
            }

            this.updateStepsUI();
            this.hideAddVehicleForm();

            if (this.elements.serviceOptions) {
                this.elements.serviceOptions.forEach(option => {
                    option.classList.remove('selected');
                });
            }

            if (this.elements.selectedServiceInput) {
                this.elements.selectedServiceInput.value = '';
            }

            if (this.elements.summaryVehicle) this.elements.summaryVehicle.textContent = '';
            if (this.elements.summaryService) this.elements.summaryService.textContent = '';
            if (this.elements.summaryDate) this.elements.summaryDate.textContent = '';
            if (this.elements.summaryTime) this.elements.summaryTime.textContent = '';
            if (this.elements.summaryDescription) this.elements.summaryDescription.textContent = '';
        }

        loadUserVehicles() {
            const token = sessionStorage.getItem('authToken');
            if (!token) {
                this.showVehiclesError('Authentication required');
                return;
            }

            if (this.elements.vehiclesList) {
                this.elements.vehiclesList.innerHTML = `
                <div class="loading-vehicles text-center py-4">
                    <div class="spinner-border text-primary mb-2" role="status"></div>
                    <p>Loading your vehicles...</p>
                </div>
            `;
            }

            fetch(this.apiEndpoints.vehicles, {
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to load vehicles');
                    }
                    return response.json();
                })
                .then(data => {
                    this.state.vehicles = Array.isArray(data) ? data : [];
                    this.renderVehiclesList();
                })
                .catch(error => {
                    console.error('Error loading vehicles:', error);
                    this.showVehiclesError(error.message);
                });
        }

        renderVehiclesList() {
            if (!this.elements.vehiclesList) return;

            if (!this.state.vehicles || this.state.vehicles.length === 0) {
                this.elements.vehiclesList.innerHTML = `
                <div class="no-vehicles text-center py-4">
                    <div class="mb-3">
                        <i class="bi bi-car-front text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <h5>No vehicles found</h5>
                    <p class="text-muted">Add a vehicle to continue</p>
                </div>
            `;
                return;
            }

            let html = '<div class="row g-3">';

            this.state.vehicles.forEach(vehicle => {
                const vehicleId = vehicle.vehicleId;
                const vehicleName = `${vehicle.brand} ${vehicle.model}`;
                const vehicleYear = vehicle.year || '';
                const vehicleReg = vehicle.registrationNumber || '';

                html += `
                <div class="col-md-6">
                    <div class="vehicle-card ${this.state.selectedVehicleId === vehicleId ? 'selected' : ''}"
                         data-vehicle-id="${vehicleId}">
                        <div class="vehicle-icon">
                            <i class="bi bi-${vehicle.category === 'Bike' ? 'bicycle' : 'car-front'}"></i>
                        </div>
                        <div class="vehicle-info">
                            <h5>${this.escapeHtml(vehicleName)}</h5>
                            <p>${vehicleYear}  ${this.escapeHtml(vehicleReg)}</p>
                        </div>
                        <div class="vehicle-select">
                            <i class="bi bi-check-circle-fill"></i>
                        </div>
                    </div>
                </div>
            `;
            });

            html += '</div>';
            this.elements.vehiclesList.innerHTML = html;

            document.querySelectorAll('.vehicle-card').forEach(card => {
                card.addEventListener('click', () => {
                    const vehicleId = parseInt(card.getAttribute('data-vehicle-id'), 10);
                    this.selectVehicle(vehicleId);
                });
            });
        }

        showVehiclesError(message) {
            if (!this.elements.vehiclesList) return;

            this.elements.vehiclesList.innerHTML = `
            <div class="alert alert-danger">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                ${message || 'Failed to load vehicles'}
            </div>
            <div class="text-center">
                <p>Please try adding a new vehicle instead</p>
            </div>
        `;
        }

        selectVehicle(vehicleId) {
            this.state.selectedVehicleId = vehicleId;

            document.querySelectorAll('.vehicle-card').forEach(card => {
                card.classList.remove('selected');
            });

            const selectedCard = document.querySelector(`.vehicle-card[data-vehicle-id="${vehicleId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            if (this.elements.nextBtn) {
                this.elements.nextBtn.disabled = false;
            }
        }

        showAddVehicleForm() {
            if (this.elements.newVehicleForm) {
                this.elements.newVehicleForm.style.display = 'block';
            }

            if (this.elements.showAddVehicleBtn) {
                this.elements.showAddVehicleBtn.style.display = 'none';
            }
        }

        hideAddVehicleForm() {
            if (this.elements.newVehicleForm) {
                this.elements.newVehicleForm.style.display = 'none';
            }

            if (this.elements.showAddVehicleBtn) {
                this.elements.showAddVehicleBtn.style.display = 'block';
            }
        }

        saveNewVehicle() {
            const brand = document.getElementById('vehicleBrand').value.trim();
            const model = document.getElementById('vehicleModel').value.trim();
            const regNumber = document.getElementById('vehicleRegNumber').value.trim();
            const year = document.getElementById('vehicleYear').value;
            const category = document.getElementById('vehicleCategory').value;

            if (!brand || !model || !regNumber || !year || !category) {
                this.showToast('Please fill all required fields', 'error');
                return;
            }

            const vehicleData = {
                brand,
                model,
                registrationNumber: regNumber,
                year: parseInt(year, 10),
                category
            };

            const token = sessionStorage.getItem('authToken');
            if (!token) {
                this.showToast('Authentication required', 'error');
                return;
            }

            if (this.elements.saveVehicleBtn) {
                this.elements.saveVehicleBtn.disabled = true;
                this.elements.saveVehicleBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Saving...';
            }

            fetch(this.apiEndpoints.newVehicle, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(vehicleData)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to save vehicle');
                    }
                    return response.json();
                })
                .then(data => {
                    this.state.vehicles.push(data);
                    this.state.selectedVehicleId = data.vehicleId;
                    this.renderVehiclesList();
                    this.hideAddVehicleForm();

                    if (document.getElementById('vehicleBrand')) document.getElementById('vehicleBrand').value = '';
                    if (document.getElementById('vehicleModel')) document.getElementById('vehicleModel').value = '';
                    if (document.getElementById('vehicleRegNumber')) document.getElementById('vehicleRegNumber').value = '';
                    if (document.getElementById('vehicleYear')) document.getElementById('vehicleYear').value = '';
                    if (document.getElementById('vehicleCategory')) document.getElementById('vehicleCategory').value = '';

                    this.showToast('Vehicle added successfully', 'success');
                })
                .catch(error => {
                    console.error('Error saving vehicle:', error);
                    this.showToast(error.message || 'Failed to save vehicle', 'error');
                })
                .finally(() => {
                    if (this.elements.saveVehicleBtn) {
                        this.elements.saveVehicleBtn.disabled = false;
                        this.elements.saveVehicleBtn.innerHTML = 'Save Vehicle';
                    }
                });
        }

        selectService(serviceOption) {
            const serviceType = serviceOption.getAttribute('data-service');
            this.state.selectedService = serviceType;

            if (this.elements.serviceOptions) {
                this.elements.serviceOptions.forEach(option => {
                    option.classList.remove('selected');
                });
            }

            serviceOption.classList.add('selected');

            if (this.elements.selectedServiceInput) {
                this.elements.selectedServiceInput.value = serviceType;
            }

            if (this.elements.nextBtn) {
                this.elements.nextBtn.disabled = false;
            }
        }

        goToNextStep() {
            if (!this.validateCurrentStep()) {
                return;
            }

            if (this.state.currentStep < this.state.totalSteps) {
                this.state.currentStep++;
                this.updateStepsUI();

                if (this.state.currentStep === 4) {
                    this.updateConfirmationSummary();
                }
            }
        }

        goToPreviousStep() {
            if (this.state.currentStep > 1) {
                this.state.currentStep--;
                this.updateStepsUI();
            }
        }

        updateStepsUI() {
            if (this.elements.steps) {
                this.elements.steps.forEach((step, index) => {
                    const stepNum = index + 1;
                    step.classList.remove('active', 'completed');

                    if (stepNum < this.state.currentStep) {
                        step.classList.add('completed');
                    } else if (stepNum === this.state.currentStep) {
                        step.classList.add('active');
                    }
                });
            }

            if (this.elements.stepContents) {
                this.elements.stepContents.forEach((content, index) => {
                    const stepNum = index + 1;
                    content.style.display = stepNum === this.state.currentStep ? 'block' : 'none';
                });
            }

            if (this.elements.prevBtn) {
                this.elements.prevBtn.style.display = this.state.currentStep > 1 ? 'block' : 'none';
            }

            if (this.elements.nextBtn) {
                this.elements.nextBtn.style.display = this.state.currentStep < this.state.totalSteps ? 'block' : 'none';
            }

            if (this.elements.submitBtn) {
                this.elements.submitBtn.style.display = this.state.currentStep === this.state.totalSteps ? 'block' : 'none';
            }
        }

        validateCurrentStep() {
            switch (this.state.currentStep) {
                case 1:
                    if (!this.state.selectedVehicleId &&
                        this.elements.newVehicleForm &&
                        this.elements.newVehicleForm.style.display === 'none') {
                        this.showToast('Please select a vehicle or add a new one', 'error');
                        return false;
                    }
                    return true;

                case 2:
                    if (!this.state.selectedService) {
                        this.showToast('Please select a service type', 'error');
                        return false;
                    }
                    return true;

                case 3:
                    if (this.elements.deliveryDate && !this.elements.deliveryDate.value) {
                        this.showToast('Please select a preferred service date', 'error');
                        return false;
                    }

                    this.state.formData = {
                        vehicleId: this.state.selectedVehicleId,
                        serviceType: this.state.selectedService,
                        deliveryDate: this.elements.deliveryDate ? this.elements.deliveryDate.value : null,
                        preferredTime: this.elements.preferredTime ? this.elements.preferredTime.value : null,
                        additionalDescription: this.elements.serviceDescription ? this.elements.serviceDescription.value : null
                    };

                    return true;

                case 4:
                    if (this.elements.termsCheck && !this.elements.termsCheck.checked) {
                        this.showToast('Please agree to the terms and conditions', 'error');
                        return false;
                    }
                    return true;
            }

            return true;
        }

        updateConfirmationSummary() {
            const selectedVehicle = this.state.vehicles.find(v => v.vehicleId === this.state.selectedVehicleId);

            if (selectedVehicle && this.elements.summaryVehicle) {
                this.elements.summaryVehicle.textContent = `${selectedVehicle.brand} ${selectedVehicle.model} (${selectedVehicle.registrationNumber})`;
            }

            if (this.elements.summaryService) {
                this.elements.summaryService.textContent = this.state.selectedService || 'N/A';
            }

            if (this.elements.deliveryDate && this.elements.summaryDate) {
                const deliveryDate = this.elements.deliveryDate.value;
                if (deliveryDate) {
                    const formattedDate = new Date(deliveryDate).toLocaleDateString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    this.elements.summaryDate.textContent = formattedDate;
                } else {
                    this.elements.summaryDate.textContent = 'N/A';
                }
            }

            if (this.elements.preferredTime && this.elements.summaryTime) {
                this.elements.summaryTime.textContent = this.elements.preferredTime.value || 'Any time';
            }

            if (this.elements.serviceDescription && this.elements.summaryDescription) {
                this.elements.summaryDescription.textContent = this.elements.serviceDescription.value || 'No additional information provided';
            }
        }

        submitBooking() {
            if (!this.validateCurrentStep()) {
                return;
            }

            const token = sessionStorage.getItem('authToken');
            if (!token) {
                this.showToast('Authentication required', 'error');
                return;
            }

            if (this.elements.submitBtn) {
                this.elements.submitBtn.disabled = true;
                this.elements.submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Processing...';
            }

            const requestData = {
                vehicleId: this.state.selectedVehicleId,
                serviceType: this.state.selectedService,
                deliveryDate: this.elements.deliveryDate ? this.elements.deliveryDate.value : null,
                additionalDescription: this.elements.serviceDescription ? this.elements.serviceDescription.value : null
            };

            fetch(this.apiEndpoints.bookService, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to book service');
                    }
                    return response.json();
                })
                .then(data => {
                    if (this.elements.modal) {
                        const bookingModal = bootstrap.Modal.getInstance(this.elements.modal);
                        if (bookingModal) {
                            bookingModal.hide();
                        }
                    }

                    this.showBookingSuccess(data);
                })
                .catch(error => {
                    console.error('Error booking service:', error);
                    this.showToast(error.message || 'Failed to book service', 'error');
                })
                .finally(() => {
                    if (this.elements.submitBtn) {
                        this.elements.submitBtn.disabled = false;
                        this.elements.submitBtn.innerHTML = '<i class="bi bi-check-circle me-1"></i> Confirm Booking';
                    }
                });
        }

        showBookingSuccess(bookingData) {
            const bookingReference = bookingData.requestId ?
                `ALB-${bookingData.requestId}-${new Date().getFullYear()}` :
                `ALB-${Math.floor(Math.random() * 10000)}-${new Date().getFullYear()}`;

            const successModal = new bootstrap.Modal(document.getElementById('bookingSuccessModal'));

            if (document.getElementById('bookingReference')) {
                document.getElementById('bookingReference').textContent = bookingReference;
            }

            if (successModal) {
                successModal.show();
            }
        }

        showToast(message, type = 'info') {
            let toastContainer = document.querySelector('.toast-container');
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
                document.body.appendChild(toastContainer);
            }

            const toastId = 'toast-' + Date.now();
            const toastHTML = `
            <div id="${toastId}" class="toast align-items-center text-white bg-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} border-0" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">
                        ${message}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        `;

            toastContainer.insertAdjacentHTML('beforeend', toastHTML);

            const toastElement = document.getElementById(toastId);
            if (toastElement) {
                const toast = new bootstrap.Toast(toastElement, {
                    autohide: true,
                    delay: 5000
                });
                toast.show();

                toastElement.addEventListener('hidden.bs.toast', function() {
                    toastElement.remove();
                });
            }
        }

        escapeHtml(text) {
            if (!text) return '';
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    }

    // DOM Ready handler
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize the booking system
        window.bookingSystem = new BookingSystem();

        // Check for authentication from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        const userData = urlParams.get('userData');

        // Store token from URL if available
        if (token) {
            sessionStorage.setItem('authToken', token);
            // Clean up URL parameters
            window.history.replaceState({}, document.title, window.location.pathname);
        }

        // Parse and store user data if available
        if (userData) {
            try {
                const parsedUserData = JSON.parse(atob(userData));
                sessionStorage.setItem('userInfo', JSON.stringify(parsedUserData));
            } catch (e) {
                console.error('Error parsing user data:', e);
            }
        }

        // Additional check for authentication state (backup mechanism)
        const authToken = sessionStorage.getItem('authToken');
        const userInfoStr = sessionStorage.getItem('userInfo');

        if (authToken && userInfoStr) {
            try {
                const userInfo = JSON.parse(userInfoStr);
                const authContainer = document.getElementById('auth-container');

                if (authContainer) {
                    const isPremium = userInfo.membershipType === 'PREMIUM';

                    authContainer.innerHTML = `
                    <div class="dropdown">
                        <button class="btn btn-primary dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i>
                            <span>${userInfo.firstName || 'User'}</span>
                            ${isPremium ? '<span class="badge badge-premium">PREMIUM</span>' : ''}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="/customer/profile">My Profile</a></li>
                            <li><a class="dropdown-item" href="/customer/myVehicles">My Vehicles</a></li>
                            <li><a class="dropdown-item" href="/customer/serviceHistory">Service History</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                        </ul>
                    </div>
                `;

                    document.getElementById('logoutBtn').addEventListener('click', function(e) {
                        e.preventDefault();
                        sessionStorage.removeItem('authToken');
                        sessionStorage.removeItem('userInfo');
                        window.location.href = '/';
                    });
                }
            } catch (e) {
                console.error('Error updating auth UI:', e);
            }
        }
    });
</script>
</body>
</html>